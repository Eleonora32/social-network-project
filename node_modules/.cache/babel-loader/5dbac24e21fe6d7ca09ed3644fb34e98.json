{"ast":null,"code":"var _jsxFileName = \"/Users/olegdubovoj/Documents/TEL-RAN/social-network-project/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from \"react-redux\";\nimport albumsInitial, { setAlbumsToStorage } from '../data/albums';\nimport photosInitial, { setPhotosToStorage } from '../data/photos';\nimport postsInitial, { setPostsToStorage } from \"../data/posts\";\nimport Navigation from \"./Navigation\";\nimport Pages from \"../layouts/Pages\";\nimport { getPosts } from \"../store/actions/posts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GlobalContext = /*#__PURE__*/React.createContext(null);\n\nconst App = ({\n  initPosts\n}) => {\n  _s();\n\n  useEffect(() => {\n    initPosts();\n  }, []);\n  const [albums, setAlbums] = useState(albumsInitial);\n\n  const addNewAlbum = formData => {\n    const newAlbums = [...albums, { ...formData,\n      id: Date.now()\n    }];\n    setAlbums(newAlbums);\n    setAlbumsToStorage(newAlbums);\n  };\n\n  const getAlbumById = id => {\n    const idx = albums.findIndex(album => album.id === id);\n\n    if (idx === -1) {\n      return null;\n    }\n\n    return albums[idx];\n  };\n\n  const [photos, setPhotos] = useState(photosInitial);\n\n  const addNewPhoto = formData => {\n    const newPhotos = [...photos, { ...formData,\n      id: Date.now(),\n      like: 0,\n      dislike: 0\n    }];\n    setPhotos(newPhotos);\n    setPhotosToStorage(newPhotos);\n  };\n\n  const photoAction = (id, action) => {\n    const newPhotos = [...photos];\n    let idx = newPhotos.findIndex(p => p.id === id);\n    if (idx === -1) return null;\n    newPhotos[idx][action]++;\n    setPhotos(newPhotos);\n    setPhotosToStorage(newPhotos);\n  }; // const [posts, setPosts] = useState(postsInitial);\n  //\n  // const addNewPost = (formData) => {\n  //     const newPosts = [...posts, {...formData, id: Date.now(), datetime: Date.now()}]\n  //     setPosts(newPosts)\n  //     setPostsToStorage(newPosts)\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: {\n      albums,\n      addNewAlbum,\n      getAlbumById,\n      photos,\n      addNewPhoto,\n      photoAction // posts,\n      // addNewPost\n\n    },\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Pages, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n\n_s(App, \"bMU5dH6Tx7QtNShPCzD5YdOfrlM=\");\n\n_c = App;\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    initPosts: () => dispatch(getPosts())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/olegdubovoj/Documents/TEL-RAN/social-network-project/src/components/App.js"],"names":["React","useState","useEffect","connect","albumsInitial","setAlbumsToStorage","photosInitial","setPhotosToStorage","postsInitial","setPostsToStorage","Navigation","Pages","getPosts","GlobalContext","createContext","App","initPosts","albums","setAlbums","addNewAlbum","formData","newAlbums","id","Date","now","getAlbumById","idx","findIndex","album","photos","setPhotos","addNewPhoto","newPhotos","like","dislike","photoAction","action","p","mapDispatchToProps","dispatch"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AAEA,SAAQC,OAAR,QAAsB,aAAtB;AAEA,OAAOC,aAAP,IAAuBC,kBAAvB,QAAgD,gBAAhD;AACA,OAAOC,aAAP,IAAuBC,kBAAvB,QAAgD,gBAAhD;AACA,OAAOC,YAAP,IAAsBC,iBAAtB,QAA8C,eAA9C;AAGA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAAQC,QAAR,QAAuB,wBAAvB;;AAEA,OAAO,MAAMC,aAAa,gBAAGb,KAAK,CAACc,aAAN,CAAoB,IAApB,CAAtB;;AAEP,MAAMC,GAAG,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAiB;AAAA;;AAEzBd,EAAAA,SAAS,CAAC,MAAI;AACVc,IAAAA,SAAS;AACZ,GAFQ,EAEN,EAFM,CAAT;AAIA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBjB,QAAQ,CAACG,aAAD,CAApC;;AAEA,QAAMe,WAAW,GAAGC,QAAQ,IAAI;AAC5B,UAAMC,SAAS,GAAG,CAAC,GAAGJ,MAAJ,EAAY,EAAC,GAAGG,QAAJ;AAAcE,MAAAA,EAAE,EAAEC,IAAI,CAACC,GAAL;AAAlB,KAAZ,CAAlB;AACAN,IAAAA,SAAS,CAACG,SAAD,CAAT;AACAhB,IAAAA,kBAAkB,CAACgB,SAAD,CAAlB;AAEH,GALD;;AAOA,QAAMI,YAAY,GAAGH,EAAE,IAAI;AACvB,UAAMI,GAAG,GAAGT,MAAM,CAACU,SAAP,CAAiBC,KAAK,IAAIA,KAAK,CAACN,EAAN,KAAaA,EAAvC,CAAZ;;AACA,QAAII,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ,aAAO,IAAP;AACH;;AACD,WAAOT,MAAM,CAACS,GAAD,CAAb;AACH,GAND;;AAQA,QAAM,CAACG,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAACK,aAAD,CAApC;;AAEA,QAAMyB,WAAW,GAAGX,QAAQ,IAAI;AAC5B,UAAMY,SAAS,GAAG,CAAC,GAAGH,MAAJ,EAAY,EAAC,GAAGT,QAAJ;AAAcE,MAAAA,EAAE,EAAEC,IAAI,CAACC,GAAL,EAAlB;AAA8BS,MAAAA,IAAI,EAAE,CAApC;AAAuCC,MAAAA,OAAO,EAAE;AAAhD,KAAZ,CAAlB;AACAJ,IAAAA,SAAS,CAACE,SAAD,CAAT;AACAzB,IAAAA,kBAAkB,CAACyB,SAAD,CAAlB;AACH,GAJD;;AAMA,QAAMG,WAAW,GAAG,CAACb,EAAD,EAAKc,MAAL,KAAgB;AAChC,UAAMJ,SAAS,GAAG,CAAC,GAAGH,MAAJ,CAAlB;AACA,QAAIH,GAAG,GAAGM,SAAS,CAACL,SAAV,CAAqBU,CAAC,IAAEA,CAAC,CAACf,EAAF,KAASA,EAAjC,CAAV;AACA,QAAII,GAAG,KAAI,CAAC,CAAZ,EAAe,OAAO,IAAP;AACfM,IAAAA,SAAS,CAACN,GAAD,CAAT,CAAeU,MAAf;AACAN,IAAAA,SAAS,CAACE,SAAD,CAAT;AACAzB,IAAAA,kBAAkB,CAACyB,SAAD,CAAlB;AACH,GAPD,CA/ByB,CAwCzB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,sBACI,QAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAE;AAC3Bf,MAAAA,MAD2B;AAE3BE,MAAAA,WAF2B;AAG3BM,MAAAA,YAH2B;AAI3BI,MAAAA,MAJ2B;AAK3BE,MAAAA,WAL2B;AAM3BI,MAAAA,WAN2B,CAO3B;AACA;;AAR2B,KAA/B;AAAA,4BAUI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAVJ,eAWI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,YAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAeH,CAhED;;GAAMpB,G;;KAAAA,G;;AAkEN,MAAMuB,kBAAkB,GAAGC,QAAQ,IAAI;AACnC,SAAO;AACHvB,IAAAA,SAAS,EAAE,MAAMuB,QAAQ,CAAC3B,QAAQ,EAAT;AADtB,GAAP;AAGH,CAJD;;AAMA,eAAeT,OAAO,CAAC,IAAD,EAAOmC,kBAAP,CAAP,CAAkCvB,GAAlC,CAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\n\nimport {connect} from \"react-redux\"\n\nimport albumsInitial, {setAlbumsToStorage} from '../data/albums'\nimport photosInitial, {setPhotosToStorage} from '../data/photos'\nimport postsInitial, {setPostsToStorage} from \"../data/posts\"\n\n\nimport Navigation from \"./Navigation\";\nimport Pages from \"../layouts/Pages\";\nimport {getPosts} from \"../store/actions/posts\";\n\nexport const GlobalContext = React.createContext(null)\n\nconst App = ({initPosts}) => {\n\n    useEffect(()=>{\n        initPosts()\n    }, [])\n\n    const [albums, setAlbums] = useState(albumsInitial)\n\n    const addNewAlbum = formData => {\n        const newAlbums = [...albums, {...formData, id: Date.now()}]\n        setAlbums(newAlbums)\n        setAlbumsToStorage(newAlbums)\n\n    }\n\n    const getAlbumById = id => {\n        const idx = albums.findIndex(album => album.id === id)\n        if (idx === -1) {\n            return null\n        }\n        return albums[idx]\n    }\n\n    const [photos, setPhotos] = useState(photosInitial)\n\n    const addNewPhoto = formData => {\n        const newPhotos = [...photos, {...formData, id: Date.now(), like: 0, dislike: 0}]\n        setPhotos(newPhotos)\n        setPhotosToStorage(newPhotos)\n    }\n\n    const photoAction = (id, action) => {\n        const newPhotos = [...photos]\n        let idx = newPhotos.findIndex( p=>p.id === id)\n        if (idx ===-1) return null\n        newPhotos[idx][action]++\n        setPhotos(newPhotos)\n        setPhotosToStorage(newPhotos)\n    }\n\n    // const [posts, setPosts] = useState(postsInitial);\n    //\n    // const addNewPost = (formData) => {\n    //     const newPosts = [...posts, {...formData, id: Date.now(), datetime: Date.now()}]\n    //     setPosts(newPosts)\n    //     setPostsToStorage(newPosts)\n    // };\n\n\n    return (\n        <GlobalContext.Provider value={{\n            albums,\n            addNewAlbum,\n            getAlbumById,\n            photos,\n            addNewPhoto,\n            photoAction,\n            // posts,\n            // addNewPost\n        }}>\n            <Navigation/>\n            <Pages/>\n        </GlobalContext.Provider>\n    )\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        initPosts: () => dispatch(getPosts())\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(App)"]},"metadata":{},"sourceType":"module"}